<div class="dashboard-container">

  <header class="header-row">
    <h1>Bienvenido {{ userName() }}</h1>

    <button mat-icon-button class="avatar-btn">
      <mat-icon class="large-icon">account_circle</mat-icon>
    </button>
  </header>

  <main class="grid-layout">

    <mat-card appearance="outlined">
      <mat-card-header>
        <mat-card-title>Gestionar Empresa</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        @if (companyData()) {
        <div style="padding: 10px 0;">
          <h2 style="color: #3f51b5; margin: 0;">{{ companyData()?.companyName }}</h2>

          <p><strong>CIF:</strong> {{ companyData()?.cif }}</p>

          <p>
            <strong>Estado:</strong>
            @if (companyData()?.active) {
            <span style="color: green; font-weight: bold;">✅ Activo</span>
            } @else {
            <span style="color: red; font-weight: bold;">❌ Inactivo</span>
            }
          </p>
        </div>
        } @else {
        <p class="no-data">Cargando datos...</p>
        }
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-stroked-button color="primary" (click)="openDetails()">
          <mat-icon>visibility</mat-icon> Ver Detalles
        </button>
      </mat-card-actions>
    </mat-card>

    <mat-card appearance="outlined">
      <mat-card-header>
        <mat-card-title>Métricas</mat-card-title>
      </mat-card-header>

      <mat-card-content class="centered-content">
        @if (chartData()) {
        <p>Gráfico...</p>
        } @else {
        <p class="no-data">No hay datos registrados</p>
        }
      </mat-card-content>
    </mat-card>

    <mat-card appearance="outlined" class="full-width">
      <mat-card-header>
        <mat-card-title>Tickets / Incidencias</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        @if (tickets().length > 0) {
        <p>Lista...</p>
        } @else {
        <div class="centered-content" style="padding: 40px 0;">
          <p class="no-data">No hay tickets recientes</p>
        </div>
        }
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-stroked-button color="primary">
          <mat-icon>folder_open</mat-icon> Gestionar
        </button>
      </mat-card-actions>
    </mat-card>

  </main>
</div>